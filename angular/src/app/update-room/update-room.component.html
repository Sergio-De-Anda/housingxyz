<div class="page">
  <div class="col text-center leftBod">
    <div ngbDropdown class="d-inline-block">
      <button class="btn btn-dark" id="dropdownBasic1" ngbDropdownToggle>{{showString}}</button>
      <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
        <button ngbDropdownItem (click)="complexChoose(complex)" *ngFor="let complex of complexList">{{complex.complexName}}</button>
      </div>
    </div>
  </div>
  <div class="rightBod">
    <ng-container *ngIf="complexRooms">
      <dev-room-details *ngFor="let r of complexRooms" [room]="r" (mouseover)="mouseOn(r)" (mouseout)="mouseOff()" (click)="select(r)" [class.card]="true" [class.hovered]="r === mouseOverRoom" [class.selected]="r === highlightRoom"></dev-room-details>
    </ng-container>
  </div>
  <div>
    <table class="table table-striped bottomBod table-bordered" *ngIf="selectedRoom">
        <thead class="thead-dark">
          <tr>
            <th scope="col" class="text-center">Room Number</th>
            <th scope="col" class="text-center">Number of Beds</th>
            <th scope="col" class="text-center">Type</th>
            <th scope="col" class="text-center">Occupied</th>
            <th scope="col" class="text-center">Start Date</th>
            <th scope="col" class="text-center">End Date</th>
          </tr>
        </thead>
        <tbody>
            <tr>
              <td scope="col" style="text-align: center">{{selectedRoom.roomNumber}}</td>
              <td scope="col" style="text-align: center">{{selectedRoom.numberOfBeds}}</td>
              <td scope="col" style="text-align: center">{{selectedRoom.roomType}}</td>
              <td scope="col" style="text-align: center">{{selectedRoom.isOccupied}}</td>
              <td scope="col" style="text-align: center">{{selectedRoom.startDate | date}}</td>
              <td scope="col" style="text-align: center">{{selectedRoom.endDate | date}}</td>
            </tr>
            <tr *ngIf="editing">
                <td scope="col" class="text-center">
                  <form class="form-group" #roomNum="ngForm">
                    <input maxlength="7" class="form-control" id="roomNumber" required type="text" [pattern]="'^(?=.*\\d)[a-zA-Z0-9]*$'"
                      [(ngModel)]="selectedRoom.roomNumber" name="roomNum" #name="ngModel" (keyup)="roomNumValid(name.invalid)"/>
                    <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger"> Must be only numbers or letters, max 7.</div>
                  </form>
                </td>
                <td scope="col" class="text-center">
                    <form class="form-group" #bedNum="ngForm">
                        <input maxlength="4" class="form-control" id="roomNumber" required type="text" [pattern]="'^(?=.*\\d)[0-9]{1,4}$'"
                          [(ngModel)]="selectedRoom.numberOfBeds" name="roomNum" #bedNum="ngModel" (keyup)="bedNumValid(bedNum.invalid)"/>
                        <div *ngIf="bedNum.invalid && (bedNum.dirty || bedNum.touched)" class="alert alert-danger"> Must be only numbers, max 4 digits.</div>
                    </form>
                </td>
                <td scope="col" class="text-center">{{selectedRoom.roomType}}</td>
                <td scope="col" class="text-center">{{selectedRoom.isOccupied}}</td>
                <td scope="col" class="text-center">{{selectedRoom.startDate.getDate()}}/{{selectedRoom.startDate.getMonth()}}/{{selectedRoom.startDate.getFullYear()}}</td>
                <td scope="col" class="text-center">{{selectedRoom.endDate.getDate()}}/{{selectedRoom.endDate.getMonth()}}/{{selectedRoom.endDate.getFullYear()}}</td>
            </tr>
        </tbody>
    </table>
    <button type="button" class="btn btn-danger" style="float: right; margin: 20px;" *ngIf="selectedRoom" [disabled]="selectedRoom.IsOccupied">Remove</button>
    <button type="button" class="btn btn-secondary" style="float: right; margin: 20px;" *ngIf="selectedRoom && !editing" (click)="startEdit()" [disabled]="selectedRoom.IsOccupied">Edit</button>
    <button type="button" class="btn btn-secondary" style="float: right; margin: 20px;" *ngIf="selectedRoom && editing" (click)="submit(selectedRoom)" [disabled]="bedNumBool === true || roomNumBool === true">Submit</button>
  </div>
</div>
